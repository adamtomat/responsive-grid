// Fluid Grid by Joe Lambert (c) 2013 Rareloop Ltd (http://www.rareloop.com)

$small-grid-margin: 2 !default;
$small-grid-count: 12 !default;
$small-grid-prefix: 'small' !default;

$large-grid-margin: 2 !default;
$large-grid-count: 12 !default;
$large-grid-prefix: 'large' !default;

@mixin small-fluid-grid()
{
	@include fluid-grid($small-grid-count, $small-grid-margin, $small-grid-prefix);
}

@mixin large-fluid-grid()
{
	@include fluid-grid($large-grid-count, $large-grid-margin, $large-grid-prefix);
}

// Build the classes needed for a grid
@mixin fluid-grid($count, $margin, $prefix)
{
	%#{$prefix}-col
	{
		-webkit-box-sizing: border-box;
		box-sizing: border-box;
	
		min-height: 1px;
		float: left;
		display: block;
		margin-left: $margin*0.5%;
		margin-right: $margin*0.5%;
	}
	
	// Create the row classes
	.#{$prefix}-row
	{
		-webkit-box-sizing: border-box;
		box-sizing: border-box;
		@include fluid-row($margin);
	}

	// Create the column classes
	@for $i from 1 through $count
	{
		.#{$prefix}-col-#{$i}
		{
			@extend %#{$prefix}-col;
			
			@include fluid-column($i, $count, $margin);
		}
	}

	// Create the offset classes
	@for $i from 1 through $count - 1
	{
		.#{$prefix}-offset-#{$i}
		{
			//margin-left: ($i * $single-width) + ($i * $margin) + $margin-actual;
			@include fluid-offset($i, $count, $margin);
		}
	}
	
	.#{$prefix}-centered
	{
		@include fluid-centered();
	}
}

// Generic mixins

@mixin fluid-row($margin: $small-grid-margin)
{
	$margin-actual: $margin/2;
	
	overflow: hidden;
	margin-left: 0% - ($margin-actual);
	margin-right: 0% - ($margin-actual);
	clear: both;
}

@mixin fluid-offset($offset, $count: $small-grid-count, $margin: $small-grid-margin)
{
	$margin-actual: $margin/2;
	$single-width: (100% - ($count * $margin)) / $count;
	margin-left: ($offset * $single-width) + ($offset * $margin) + $margin-actual;
}

@mixin fluid-column($cols, $count: $small-grid-count, $margin: $small-grid-margin)
{
	$margin-actual: $margin/2;
	$single-width: (100% - ($count * $margin)) / $count;

	width: ($cols * $single-width) + (($cols - 1) * $margin);
}

%fluid-centered
{
	margin-left: auto !important;
	margin-right: auto !important;
	float: none !important;
}

@mixin fluid-centered()
{
	@extend %fluid-centered;
}